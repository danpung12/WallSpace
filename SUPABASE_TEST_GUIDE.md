# 🧪 WallSpace Supabase 연동 테스트 가이드

## 📋 개요

이 문서는 WallSpace 프로젝트의 Supabase 백엔드 연동을 테스트하는 방법을 안내합니다.

## 🚀 사전 준비

### 1. 환경 변수 설정
`.env.local` 파일에 다음 환경 변수들이 설정되어 있는지 확인하세요:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://gnhwzbvlaqdnkahurlbv.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=sb_publishable_8hRhcIHmbeqGL7mh8bm0GQ_pnBrpnAc
NEXT_PUBLIC_KAKAO_MAP_KEY=807d8faa924336032c993dc7a08ec470
```

### 2. 개발 서버 실행
```bash
npm run dev
```

## 🧪 테스트 시나리오

### 1. 사용자 인증 테스트

#### 1.1 회원가입 테스트

**예술가 회원가입:**
1. `http://localhost:3000` 접속
2. "회원가입" 버튼 클릭
3. "예술가/사장님으로 가입" 선택
4. 다음 정보 입력:
   - 이메일: `artist@test.com`
   - 이름: `테스트 작가`
   - 닉네임: `test_artist`
   - 비밀번호: `password123`
   - 비밀번호 확인: `password123`
   - 전화번호: `010-1234-5678`
   - 웹사이트: `https://test-artist.com`
5. "가입하기" 버튼 클릭
6. ✅ 성공 시: 모달이 닫히고 페이지가 새로고침됨

**손님 회원가입:**
1. "손님으로 가입" 선택
2. 다음 정보 입력:
   - 이메일: `guest@test.com`
   - 이름: `테스트 손님`
   - 닉네임: `test_guest`
   - 비밀번호: `password123`
   - 비밀번호 확인: `password123`
   - 전화번호: `010-9876-5432`
3. "가입하기" 버튼 클릭
4. ✅ 성공 시: 모달이 닫히고 페이지가 새로고침됨

#### 1.2 로그인 테스트

**정상 로그인:**
1. 로그인 폼에 등록한 계정 정보 입력
2. "로그인" 버튼 클릭
3. ✅ 성공 시: `/home` 페이지로 리다이렉트

**잘못된 정보로 로그인:**
1. 잘못된 이메일/비밀번호 입력
2. "로그인" 버튼 클릭
3. ✅ 실패 시: 에러 메시지 표시

### 2. 데이터베이스 연동 테스트

#### 2.1 공간 데이터 로딩 테스트

**지도 페이지 접속:**
1. `http://localhost:3000/map` 접속
2. ✅ 확인사항:
   - 지도가 정상적으로 로드됨
   - 3개의 샘플 공간이 마커로 표시됨:
     - 갤러리 모던
     - 카페 아트
     - 문화회관 센터
   - 각 마커 클릭 시 공간 정보 표시

#### 2.2 작품 데이터 로딩 테스트

**작품 선택 모달:**
1. 지도 페이지에서 "작품 선택" 버튼 클릭
2. ✅ 확인사항:
   - 작품 목록이 로드됨 (현재는 빈 목록일 수 있음)
   - 작품 추가/수정 기능 작동

### 3. 예약 시스템 테스트

#### 3.1 예약 생성 테스트

**새 예약 생성:**
1. 로그인된 상태에서 지도 페이지 접속
2. 공간 선택 후 예약 정보 입력
3. ✅ 확인사항:
   - 예약 정보가 데이터베이스에 저장됨
   - 예약 상태가 "pending"으로 설정됨

#### 3.2 예약 조회 테스트

**대시보드에서 예약 확인:**
1. `http://localhost:3000/dashboard` 접속
2. ✅ 확인사항:
   - 사용자의 예약 목록이 표시됨
   - 예약 상태별로 필터링 가능
   - 예약 취소/수정 기능 작동

### 4. 프로필 관리 테스트

#### 4.1 프로필 조회 테스트

**프로필 페이지:**
1. `http://localhost:3000/profile` 접속
2. ✅ 확인사항:
   - 사용자 정보가 정상적으로 표시됨
   - 프로필 수정 기능 작동

#### 4.2 프로필 수정 테스트

**프로필 정보 수정:**
1. 프로필 페이지에서 정보 수정
2. "저장" 버튼 클릭
3. ✅ 확인사항:
   - 변경사항이 데이터베이스에 반영됨
   - 성공 메시지 표시

### 5. 알림 시스템 테스트

#### 5.1 알림 설정 테스트

**알림 설정 변경:**
1. 프로필 페이지에서 알림 설정 변경
2. ✅ 확인사항:
   - 설정이 데이터베이스에 저장됨
   - 페이지 새로고침 후에도 설정 유지

## 🔍 데이터베이스 확인

### Supabase Dashboard에서 확인할 수 있는 데이터:

1. **사용자 프로필** (`profiles` 테이블)
2. **공간 정보** (`locations` 테이블)
3. **세부 공간** (`spaces` 테이블)
4. **작품 정보** (`artworks` 테이블)
5. **예약 정보** (`bookings` 테이블)
6. **리뷰 정보** (`reviews` 테이블)

### 샘플 데이터 확인:

다음 샘플 데이터들이 자동으로 생성되어 있습니다:

- **카테고리**: 갤러리, 카페, 문화회관, 복합문화공간
- **태그**: 20개의 공간 특성 태그
- **공간**: 3개의 테스트 공간
- **공간 옵션**: 주차, 반려동물, 24시간 운영 정보
- **공간 이미지**: 각 공간별 이미지 데이터

## 🐛 문제 해결

### 일반적인 문제들:

#### 1. 환경 변수 오류
```
Error: Missing environment variables
```
**해결방법**: `.env.local` 파일이 올바른 위치에 있고 내용이 정확한지 확인

#### 2. Supabase 연결 오류
```
Error: Failed to fetch
```
**해결방법**: 
- Supabase 프로젝트가 활성화되어 있는지 확인
- 네트워크 연결 상태 확인
- 브라우저 개발자 도구에서 네트워크 탭 확인

#### 3. 인증 오류
```
Error: Invalid credentials
```
**해결방법**:
- 이메일/비밀번호가 정확한지 확인
- Supabase Auth 설정 확인

#### 4. RLS 정책 오류
```
Error: Row Level Security policy violation
```
**해결방법**:
- Supabase Dashboard에서 RLS 정책 확인
- 사용자 권한 확인

## 📊 성능 테스트

### 1. 로딩 시간 측정
- 페이지 로드 시간: < 3초
- API 응답 시간: < 1초
- 이미지 로드 시간: < 2초

### 2. 동시 사용자 테스트
- 여러 브라우저에서 동시 접속
- 동일한 계정으로 여러 세션 테스트

## 🔒 보안 테스트

### 1. 인증 보안
- 로그아웃 후 보호된 페이지 접근 차단 확인
- 세션 만료 처리 확인

### 2. 데이터 보안
- 다른 사용자의 데이터 접근 차단 확인
- RLS 정책 작동 확인

## 📝 테스트 체크리스트

### 기본 기능
- [ ] 회원가입 (예술가)
- [ ] 회원가입 (손님)
- [ ] 로그인
- [ ] 로그아웃
- [ ] 프로필 조회/수정

### 지도 기능
- [ ] 지도 로드
- [ ] 공간 마커 표시
- [ ] 공간 정보 표시
- [ ] 필터링 기능

### 예약 기능
- [ ] 예약 생성
- [ ] 예약 조회
- [ ] 예약 수정
- [ ] 예약 취소

### 데이터 연동
- [ ] 실시간 데이터 동기화
- [ ] 오프라인/온라인 상태 처리
- [ ] 에러 처리

## 🚀 배포 전 체크리스트

### 환경 설정
- [ ] 프로덕션 환경 변수 설정
- [ ] Supabase 프로덕션 프로젝트 설정
- [ ] 도메인 설정

### 보안
- [ ] RLS 정책 검토
- [ ] API 키 보안 확인
- [ ] 사용자 권한 검토

### 성능
- [ ] 데이터베이스 인덱스 최적화
- [ ] 이미지 최적화
- [ ] 캐싱 전략 적용

## 📞 지원

문제가 발생하거나 추가 도움이 필요한 경우:

1. **개발자 도구 콘솔** 확인
2. **Supabase Dashboard** 로그 확인
3. **네트워크 탭**에서 API 요청/응답 확인
4. **데이터베이스** 직접 쿼리로 데이터 확인

---

**테스트 완료 후 모든 기능이 정상 작동하면 Supabase 연동이 성공적으로 완료된 것입니다!** 🎉
